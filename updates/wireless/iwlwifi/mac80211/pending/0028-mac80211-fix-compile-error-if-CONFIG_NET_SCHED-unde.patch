From 16d350730af21442636dc3ab822a8ae230fecffa Mon Sep 17 00:00:00 2001
From: Zhu Yi <yi.zhu@intel.com>
Date: Tue, 10 Jul 2007 15:21:58 +0800
Subject: [PATCH] mac80211: fix compile error if CONFIG_NET_SCHED undefined

Signed-off-by: Zhu Yi <yi.zhu@intel.com>
---
 net/mac80211/wme.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/net/mac80211/wme.c b/net/mac80211/wme.c
index beb729d..90be362 100644
--- a/net/mac80211/wme.c
+++ b/net/mac80211/wme.c
@@ -736,6 +736,7 @@ void ieee80211_wme_unregister(void)
 
 int ieee80211_ht_agg_queue_add(struct ieee80211_local *local, struct sta_info *sta, u16 tid)
 {
+#ifdef CONFIG_NET_SCHED
 	int i;
 	struct ieee80211_sched_data *q = qdisc_priv(local->mdev->qdisc_sleeping);
 
@@ -761,11 +762,13 @@ int ieee80211_ht_agg_queue_add(struct ieee80211_local *local, struct sta_info *s
 			return 0;
 		}
 
+#endif /* CONFIG_NET_SCHED */
 	return -EAGAIN;
 }
 
 int ieee80211_ht_agg_queue_remove(struct ieee80211_local *local, struct sta_info *sta, u16 tid)
 {
+#ifdef CONFIG_NET_SCHED
        	int i;
 	struct ieee80211_sched_data *q = qdisc_priv(local->mdev->qdisc_sleeping);
 
@@ -774,6 +777,7 @@ int ieee80211_ht_agg_queue_remove(struct ieee80211_local *local, struct sta_info
 	clear_bit(i, &q->qdisc_pool);
 	sta->tx_queue_id[tid] = local->hw.queues;
 
+#endif /* CONFIG_NET_SCHED */
 	return 0;
 }
 
-- 
1.5.2

