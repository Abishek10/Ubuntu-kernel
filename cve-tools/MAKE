#!/bin/bash -x

bzr whoami "Kernel Bot <kernel-team@lists.ubuntu.com>"

git clone --bare http://git.kernel.org/pub/scm/linux-linus/kernel/git/torvalds/linux-linus
(
	cd linux-linus || exit 1
	git remote add origin http://git.kernel.org/pub/scm/linux-linus/kernel/git/torvalds/linux-linus.git
	git fetch origin
)

for series in hardy lucid natty oneiric precise quantal raring
do
    (
	git clone --bare --reference linux-linus linux-linus ubuntu-$series
	cd ubuntu-$series || exit 1
	git remote rm origin
	git remote add origin http://kernel.ubuntu.com/git-repos/ubuntu/ubuntu-$series.git
	git fetch origin
    )
done

(
	git clone --bare --reference linux-linus linux-linus oem-armadaxp
	cd oem-armadaxp || exit 1
	git remote add origin http://kernel.ubuntu.com/git-repos/hwe/oem-armadaxp.git
	git fetch origin
)
