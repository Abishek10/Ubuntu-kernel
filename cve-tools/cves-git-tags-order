#!/usr/bin/python
#
# cves-git-tags-order
#
import sys
import re

from subprocess     import Popen, PIPE

versions = sys.argv[1:]

# Find the date of the release pointed to by this tag
def tag_date(tag):
    cmd = [ 'git', 'log', '-1', '--format=format:%ct', tag ]
    return Popen(cmd, stdout=PIPE).communicate()[0]


# Find the list of tags for each version
tags_ts = []
for (tag, version) in zip(versions[::2], versions[1::2]):
    tags_ts.append((tag_date(tag), tag, version))
tags_ts.sort()
tags = [ (tag_name, tag_version) for tag_ts, tag_name, tag_version in tags_ts ]

for (tag_name, tag_version) in tags:
    print tag_name + " " + tag_version
