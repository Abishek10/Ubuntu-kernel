#!/bin/bash

while read from tos
do
	grep -H "^$from:" "$@" | \
		sed -e 's/:/ /' | \
		while read file dummy state notes
		do
			case "$state" in
			pending|released|not-affected|needed)
				if [ "$state" = "released" ]; then
					state='pending'
				fi
				for to in $tos
				do
					to=`echo "$to" | sed -e 's/_/ /'`
					echo "$file $to - $state"
				done
				;;
			esac
		done
done <<EOL
lucid_linux	lucid_ec2 lucid_mvl-dove maverick_mvl-dove
maverick_linux	lucid_lts-backport-maverick
natty_linux	lucid_lts-backport-natty
EOL
