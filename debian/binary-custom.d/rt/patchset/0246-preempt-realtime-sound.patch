---
 sound/core/pcm_lib.c |    2 ++
 1 file changed, 2 insertions(+)

Index: linux-2.6.24.7-rt21/sound/core/pcm_lib.c
===================================================================
--- linux-2.6.24.7-rt21.orig/sound/core/pcm_lib.c	2008-10-08 22:22:28.000000000 -0400
+++ linux-2.6.24.7-rt21/sound/core/pcm_lib.c	2008-10-08 22:24:01.000000000 -0400
@@ -30,6 +30,7 @@
 #include <sound/pcm_params.h>
 #include <sound/timer.h>
 
+#include <linux/ftrace.h>
 /*
  * fill ring buffer with silence
  * runtime->silence_start: starting pointer to silence area
@@ -130,6 +131,7 @@ static void xrun(struct snd_pcm_substrea
 	snd_pcm_stop(substream, SNDRV_PCM_STATE_XRUN);
 #ifdef CONFIG_SND_PCM_XRUN_DEBUG
 	if (substream->pstr->xrun_debug) {
+		user_trace_stop();
 		snd_printd(KERN_DEBUG "XRUN: pcmC%dD%d%c\n",
 			   substream->pcm->card->number,
 			   substream->pcm->device,
