diff -urp origin/iwl3945-base.c new/iwl3945-base.c
--- origin/iwl3945-base.c	2007-09-03 14:30:59.000000000 +0800
+++ new/iwl3945-base.c	2007-09-04 11:14:12.000000000 +0800
@@ -8232,6 +8232,10 @@ static void iwl_setup_deferred_work(stru
 		     iwl3945_irq_tasklet, (unsigned long)priv);
 }
 
+#ifndef cancel_work_sync
+#define cancel_work_sync(x)
+#endif
+
 static void iwl3945_cancel_deferred_work(struct iwl3945_priv *priv)
 {
 	iwl3945_hw_cancel_deferred_work(priv);
diff -urp origin/iwl4965-base.c new/iwl4965-base.c
--- origin/iwl4965-base.c	2007-09-03 14:32:35.000000000 +0800
+++ new/iwl4965-base.c	2007-09-04 11:14:12.000000000 +0800
@@ -8795,6 +8795,10 @@ static void iwl_setup_deferred_work(stru
 		     iwl4965_irq_tasklet, (unsigned long)priv);
 }
 
+#ifndef cancel_work_sync
+#define cancel_work_sync(x)
+#endif
+
 static void iwl4965_cancel_deferred_work(struct iwl4965_priv *priv)
 {
 	iwl4965_hw_cancel_deferred_work(priv);
