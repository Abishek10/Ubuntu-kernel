# test01
# dependency package: ffmpeg mplayer

test01() {
    TEST="Video-01:Record video from webcam"
    tst_prompt "
\n
You are about to test your webcam's recording and playback
functionality. When you run this test, your webcam will start
recording a video though the webcam, and it will be played back
to you. 
\n
\n
If your computer does not have a webcam attached/built-in
please skip this test. 
\n
    "

    case $? in 
    0) # yes
        tst_msg "\nVideo from your camera is being recorded now." 0
        ffmpeg -t 00:00:05 -f oss -i /dev/dsp -r 20 -s 320x240 -f video4linux2 -i /dev/video0 $TEMPDIR/ignore.video.mpg 2>$TEMPDIR/video.stderr
        tst_msg "\nYou should be seeing the video that was recorded." 0
        mplayer -really-quiet $TEMPDIR/ignore.video.mpg 2>&1 1>/dev/null

        tst_dmesg

        tst_result_prompt "
\n
Did the video playback look correct? 
\n
\n 
    "

        tst_reslog $? "linux" ;;
    *)
        tst_skip ;;
    esac
    return
}
